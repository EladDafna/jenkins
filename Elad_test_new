pipeline {
    agent any
    parameters {
        choice(
            name: 'Language',
            choices: ['All', 'Python', 'C', 'Bash'],
            description: 'Choose the language'
        )
    }
    stages {
        stage('List File - (Step 1)') {
            steps {
                echo "Step 1 is running...."
                script {
                    echo "Workspace: ${WORKSPACE}"
                    sh 'ls -la'
                }
            }
        }
        stage('File Name is: Python (Step 2)') {
            steps {
                echo "Step 2 is running...."
                script {
                    sh 'pwd'
                    sh 'ls -la'
                    if (params.Language == 'Python' || params.Language == 'Bash' || params.Language == 'C') {
                        sh """
                            echo "Your Choose is:" ${params.Language}
                            cat ${params.Language}.txt
                            mkdir -p ${WORKSPACE}/Language
                            mv ${params.Language}.txt ${WORKSPACE}/Language
                        """
                    } else {
                        echo "The script is automatically started, so your chose is: All "
                        sh "cp -r ${WORKSPACE}*[CBP]*.txt" "${WORKSPACE}/Language"

                    }
                }
            }
        }
        stage('Save File in Another Agent - (Step 3)') {
            steps {
                echo "Step 3 is running..."
                script {
                     sh 'ls -la /var/jenkins_home/Elad1/'
                     sh 'pwd'
                }
            }
        }
    }
}
